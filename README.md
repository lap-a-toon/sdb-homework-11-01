# Домашнее задание к занятию 11.1 "`Базы данных, их типы`" - `Лабазов Александр`

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая так же занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на Ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1 Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчетов и прогнозирования рисков
(СУБД должна гарантировать целостность и четкую структуру данных).
```
На мой взгляд наиболее подходящим вариантом было бы использование реляционной БД,
т.к. в ней структура четко определена на этапе проектирования.
```

1.2 Под каждый девелоперский проект создается отдельный лендинг и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
(СУБД должны быть гибкими и быстрыми).
```
Для CRM однозначно следует использовать реляционную базу данных с четко структурированной архитектурой, 
т.к. в CRM стекаются одинаковые по своей сути запросы/задачи (или как их называют "Лиды")
Для Лендингов же перед проектированием имеет смысл задать ряд вопросов:
1. Будет ли контент на страницах динамическим (отличающимся в зависимости от каких-либо событий)
      Если нет, то использовать БД вообще не имеет смысла, можно просто сверстать страницу и всё.
      Если да, то наиболее оптимальным было бы использовать Объектно-ориентированную базу данных
      Однако NoSQL будет работать значительно быстрее, но несколько сложнее в разработке (хотя как знать...)
      Так же важно будет сделать увязку данных из CRM, т.к. "квартира" может быть продана/зарезервирована
      и эти данные должны будут найти свое отражение на Лендинге.
2. В виду того, что проект "девелоперский" (если я правильно понимаю, то это "про строительство"),
   уместно задаться таким вопросом: Будет ли на лендинге возможность для посетителя просмотра актуальности
   предложений тех же квартир в условном ЖК?
      Если да, то считаю уместным использовать реляционную БД для подобного функционала.
      Если нет, то можно использовать объектно-ориентированную БД (см. в.1)
```
1.2* Можно ли данную задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
```
Можно, Postgres или MySQL.
Причем и для Лендингов и для CRM можно использовать одну единственную базу.
Это даст преимущество высокой скорости обработки данных в "центре", где размещена БД
Однако это решение потребует наличия кроссерверных запросов (хотя можно развернуть всё в одном),
что приведет к увеличению ожидания ответов от сервера БД

Решение с децентрализацией, на мой взгляд куда эффективнее с точки зрения отклика страниц.
```

1.3 Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуры компании (СУБД должна иметь простую и понятную структуру).
```
Реляционная БД, создаются таблицы (набросал сугубо приблизительно, "на коленке"):
1. Пользователи (менеджеры, подлежащие оценке/обучению)
2. Учебные материалы
3. Изменения статусов прохождения материалов пользователями (назначен|в процессе|пройден)
4. Тесты
3. Изменения статусов прохождения тестов пользователями с оценками (назначен|в процессе|пройден)
```

1.3* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?
```
Можно.
   собственно в п. 1.3 описал каким образом это реализовать
   в дополнение можно сделать перелинковку учебных материалов с продуктами из п. 1.2
Но не стоит.
   Лучше использовать отдельную реализацию, которая не будет создавать дополнительную нагрузку
   на "продающую" часть сервиса.
```

1.4 Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов (СУБД должна уметь быстро работать
со связями).
```
Полагаю, что графовая СУБД в данном случае будет уместна
```

---

### Задание 2. Транзакции.

2.1 Пользователь пополняет баланс счета телефона, распишите пошагово какие действия должны произойти для того, чтобы 
транзакция завершилась успешно (ориентируйтесь на 6 действий).
```
1. Клиентское приложение - Передача банку реквизитов:
   - Оператор связи
   - Абонентский номер
   - Сумма к оплате
2. Банк - Резервирование суммы
3. Банк - Запрос
   - Абонентский номер (ожидается ответ есть такой или нет)
4. Банк - Есть абонентский номер - Передача
   - денежная транзакция
   - абонентский номер
5. Оператор - биллинг
   - абонентский номер
   - сумма зачисления
6. Оператор - Банк
   - номер транзакции
   - результат успеха
7. Банк - Клиент
   - номер транзакции
   - результат успеха операции
8. Оператор (если абонент был заблокирован) - биллинг - если денег достаточно
   - абонентский номер
   - разблокировка

Правильнее было бы представить это в виде диаграммы, т.к. по идее много ветвлений, но диаграмы рисовать не охота
```

2.1* Какие действия должны произойти, если пополнение счета телефона происходило бы через автоплатеж?
```
Вместо п. 1 из 2.1 следующее:
А. Условная CRON-задача на автоплатеж - Банк
   - оператор
   - аб. номер
   - сумма
   - счет списания
Б. Проверка доступности денежных средств на счете списания
   - сумма
...
Далее переход к п. 2 из 2.1

...
На п.7 из 2.1
- PUSH-уведомление или СМС о произведенной операции
...
```

---

### Задание 3. SQL vs NoSQL

3.1 Напишите 5 преимуществ SQL систем по отношению к NoSQL. 
```
1. Четкая структура таблиц данных
2. Четкое определение вводимых и отдаваемых данных (неверные данные в БД не будут внесены)
3. Есть процедуры и функции, что дает возможность производить некоторые вычисления прямо в БД
4. Можно вевсти историю изменений данных (впринципе для NoSQL тоже можно, но в SQL это организовать легче)
5. Всегда ожидаемый результат выполнения запросов.
```

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределенных вычислений* 
здесь справится лучше всего и почему?

```
Считаю наиболее важными:
1. Устойчивость к распаду на секции
2. Доступность.

Соответственно, согласно PACELС, считаю уместным использовать модель PA, следовательно, решение - MongoDB
```